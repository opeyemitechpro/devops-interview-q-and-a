{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
  <div class="hero-content">
    <h1>Ace Your <span class="highlight">DevOps</span>, <span class="highlight">Cloud</span> & SRE Interviews</h1>
    <p class="subheading">A continuously updated collection of real-world interview questions and expert answers.</p>
    <div class="cta-buttons">
      <a href="{{ base_url }}/by-role/" class="btn primary">Browse by Role</a>
      <a href="{{ base_url }}/by-knowledge-area/" class="btn secondary">Browse by Skill</a>
    </div>
  </div>
</section>

<!-- Search Bar -->
<section class="search-section">
  <input type="search" id="search-query" placeholder="Search 500+ interview questions...">
  <div id="search-results"></div>
</section>

<!-- Category Cards -->
<section class="categories">
  <h2>Explore Categories</h2>
  <div class="category-grid">
    <a class="category-card" href="{{ base_url }}/by-role/">
      <span class="material-icons">groups</span>
      <h3>By Role</h3>
      <p>DevOps, SRE, Cloud Engineer, and more</p>
    </a>
    <a class="category-card" href="{{ base_url }}/by-knowledge-area/">
      <span class="material-icons">cloud</span>
      <h3>By Knowledge Area</h3>
      <p>AWS, Azure, GCP, Kubernetes...</p>
    </a>
    <a class="category-card" href="{{ base_url }}/by-question-type/">
      <span class="material-icons">help_outline</span>
      <h3>By Question Type</h3>
      <p>Theoretical, Practical, Scenario</p>
    </a>
    <a class="category-card" href="{{ base_url }}/by-difficulty-level/">
      <span class="material-icons">bar_chart</span>
      <h3>By Difficulty</h3>
      <p>Beginner to Expert</p>
    </a>
    <a class="category-card" href="{{ base_url }}/resources/">
      <span class="material-icons">menu_book</span>
      <h3>Resources</h3>
      <p>Cheat sheets, study guides</p>
    </a>
  </div>
</section>

<!-- Tags -->
<section class="tags-section">
  <h2>üî• Trending Tags</h2>
  <div class="tag-list">
    <a href="{{ base_url }}/tags/aws/" class="tag">AWS</a>
    <a href="{{ base_url }}/tags/kubernetes/" class="tag">Kubernetes</a>
    <a href="{{ base_url }}/tags/ci-cd/" class="tag">CI/CD</a>
    <a href="{{ base_url }}/tags/terraform/" class="tag">Terraform</a>
    <a href="{{ base_url }}/tags/docker/" class="tag">Docker</a>
    <a href="{{ base_url }}/tags/monitoring/" class="tag">Monitoring</a>
  </div>
</section>

<!-- How It Works -->
<section class="how-it-works">
  <h2>How It Works</h2>
  <div class="steps">
    <div class="step">
      <span class="material-icons">search</span>
      <h3>Browse</h3>
      <p>Find questions by category, skill, or difficulty.</p>
    </div>
    <div class="step">
      <span class="material-icons">lightbulb</span>
      <h3>Learn</h3>
      <p>Understand answers with pro tips and real-world examples.</p>
    </div>
    <div class="step">
      <span class="material-icons">check_circle</span>
      <h3>Ace</h3>
      <p>Walk into your interview with confidence.</p>
    </div>
  </div>
</section>

<!-- Resources -->
<section class="resources-section">
  <h2>Resources</h2>
  <div class="resource-grid">
    <a href="{{ base_url }}/resources/cheatsheets/" class="resource-card">
      <span class="material-icons">description</span>
      Cheat Sheets
    </a>
    <a href="{{ base_url }}/resources/labs/" class="resource-card">
      <span class="material-icons">science</span>
      Hands-on Labs
    </a>
    <a href="{{ base_url }}/resources/guides/" class="resource-card">
      <span class="material-icons">menu_book</span>
      Study Guides
    </a>
  </div>
</section>

<!-- Contribute -->
<section class="contribute-section">
  <h2>üí° Contribute to This Project</h2>
  <p>Help make this the most comprehensive DevOps interview resource.</p>
  <a href="https://github.com/your-repo" class="btn primary">Contribute on GitHub</a>
</section>

<!-- Footer -->
<footer class="footer">
  <p>¬© 2025 DevOps Interview Q&A. Built with ‚ù§Ô∏è and Material for MkDocs.</p>
</footer>

<!-- Search Integration Script -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const searchInput = document.getElementById("search-query");
  const resultsContainer = document.getElementById("search-results");

  let searchIndex = [];

  // Load MkDocs search index
  fetch("search/search_index.json")
    .then(response => response.json())
    .then(data => {
      searchIndex = data.docs;
    });

  searchInput.addEventListener("input", function() {
    const query = searchInput.value.toLowerCase();
    resultsContainer.innerHTML = "";

    if (query.length > 1) {
      const results = searchIndex.filter(doc =>
        doc.title.toLowerCase().includes(query) ||
        doc.text.toLowerCase().includes(query)
      ).slice(0, 8);

      if (results.length > 0) {
        results.forEach(result => {
          const item = document.createElement("div");
          item.className = "search-result";

          // Append a #anchor to the result location if possible
          let anchor = "";
          if (result.text) {
            // create an anchor ID from the first few words of the text
            anchor = "#q-" + result.text.split(" ").slice(0, 5).join("-").toLowerCase().replace(/[^a-z0-9\-]/g, "");
          }

          item.innerHTML = `<a href="${result.location}${anchor}">${result.title}</a>`;
          resultsContainer.appendChild(item);
        });
      } else {
        resultsContainer.innerHTML = "<div class='no-results'>No matches found</div>";
      }
    }
  });

  // Highlight target question when page loads with an anchor
  if (window.location.hash.startsWith("#q-")) {
    const targetId = window.location.hash.substring(1);
    const targetEl = document.getElementById(targetId);
    if (targetEl) {
      targetEl.classList.add("highlight-question");
      targetEl.scrollIntoView({ behavior: "smooth", block: "center" });

      setTimeout(() => {
        targetEl.classList.remove("highlight-question");
      }, 3000);
    }
  }
});
</script>

{% endblock %}
